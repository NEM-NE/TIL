객체지향의 사실과 오해 정리
===

## 목차

1. <b>협력하는 객체들의 공동체</b>
2. <b>이상한 나라의 객체</b>

----

<br><br><br>

## 협력하는 객체들의 공동체

<br>

> 객체지향의 핵심은 클래스, 메서드가 아니라 협력, 역할, 책임이다.

<br>

    지금 나는 카페에 가서 커피를 주문한다고 가정하자.
    카페에는 주문을 받는 캐시어, 커피를 제조하는 바리스타가 있다.

    손님인 나는 커피를 주문하게 되고 캐시어는 주문을 받고 나의 결제를 받고 있다.
    
    이후 주문을 받은 캐시어는 바리스타에게 주문을 알려주고 바리스타는 자신만의 방법으로 커피를 제조한다.

    제조된 커피는 다시 캐시어에게 전달되어 나에게 건네준다.

위 과정에서 커피 주문이라는 협력 안에서 손님, 캐시어, 바리스타의 역할이 존재하고 각 역할안에서 맡은 책임을 다하고 있다.

<br><br>

### 요청과 응답으로 구성된 협력

<br>

하나의 역할에서 모든일을 다 처리하기 버거우므로 다른 책임을 가지고 있는 역할에게 `요청`을 한다.

이 요청은 위 커피 주문처럼 `연쇄적`으로 일어나며 응답 역시 `연쇄적`으로 처리된다.

즉, 이러한 요청과 응답을 통해 다른 역할과 협력을 할 수 있게 해준다.

<br><br>

### 역할과 책임

<br>

협력 속에서 서로 다른 역할이 존재하고 그에 따른 특정한 책임이 존재한다.

이에 따라 중요한 개념을 제시하는데

* 여러 사람이 동일한 역할을 수행할 수 있다.
* 역할은 대체 가능하다.
* 책임을 수행하는 방법은 자율적이다.
* 한 사람이 동시에 여러 작업을 수행할 수 있다.

<br><br>

### 협력 속에 사는 객체

<br>

객체 지향 어플리케이션에서는 협력에 참여하는 주체는 객체, 요청/응답은 메세지, 처리하는 방법을 메서드라고 부른다.
또한 어플리케이션은 수 많은 객체들의 협력으로 이뤄지기 때문에 객체의 품질은 곧 어플리케이션의 품질을 의미한다.
따라서 객체의 품질을 올리기 위해서는 2가지 덕목을 따라야하는데

1. 객체는 충분히 협력적이어야 한다.  => 요청에 복종하는 것이 아닌 응답하는 것이다. (요청을 수행하는 것도 자율적으로..)
2. 객체는 충분히 자율적이어야 한다. => 스스로 결정하고 행동해야한다.


객체가 자율적인 존재가 되기 위해서는 `필요한 행동과 상태`를 가지고 있어야 하며 
사적인 부분은 다른 객체들이 모르게 하되 객체의 외부에서는 접근이 허락된 수단을 통해서만 소통해야한다. (외부의 요청을 표현하기 위한 메세지와 요청을 처리하는 메서드를 분리하는게 핵심)
이를 통해 유지보수가 쉽고 재사용성이 용이한 시스템을 구축할 수 있다.

<br><br>

### 정리

<br>

* 객체지향이란 시스템을 구성하고 있는 자율적인 객체들을 통해 시스템을 분리하는 방법이다.
* 자율적인 객체란 상태와 행동을 가지며 스스로 판단하고 행동하는 것을 의미한다.
* 객체는 시스템의 기능을 수행하기 위해 다른 객체들과 협력을 하며 협력 간에 각 객체들은 역할이 있고 역할은 서로 다른 책임들의 집합을 의미한다.
* 객체는 협력하기 위해 메세지를 다른 객체에게 보내고 받은 메세지를 처리하기 위해 자율적으로 메서드를 선택 후 처리한다.

<br><br>

----

<br><br><br>

## 이상한 나라의 객체

> 객체의 중요한 특성은 상태, 행동, 식별자이다.

객체는 인간의 인지 능력인에서 인식할 수 있는 모든 사물을 의미. (개념적인 내용도 포함)

    이상한 나라의 앨리스 이야기 중 앨리스는 토끼를 따라가던 중 자신의 크기로는 통과할 수 없는 문을 발견하고
    문을 통과하기 위해 주변에 있는 물병, 부채, 버섯, 케이크를 통해 자신의 크기를 조절할 수 있었고 
    이를 통해 문을 통과할 수 있었다

즉, 앨리스는 부채를 이용하여 키를 20cm를 줄일 수 있다. 부채질이라는 행동을 통해 앨리스 키의 상태를 변화 시키는 것이다.
또한 부채질을 통해 자신의 키 - 20cm로 변하는데 이는 앨리스의 행동의 결과는 상태에 의존적이라는 것을 나타낸다.

=> `행동은 상태를 변화시키지만 행동의 결과는 상태에 의존적이다.`

### 상태

상태는 왜 필요한가? => 행동의 결과를 쉽게 예측할 수 있기 때문에 필요하다.

상태와 프로퍼티 => 객체의 상태란 앨리스의 키는 130cm처럼 특징을 가지는데 여기서 앨리스의 키는 프로퍼티, 130cm는 프로퍼티 값이 된다. 또한 앨리스와 음료수 관계처럼 프로퍼티 값은 단순한 값이 될 수도 있지만 객체가 될 수 있다. (이를 링크라고 부름)

또한 `상태는 반드시 자신에 의해서만 변경 되야하며 다른 객체가 직접적으로 접근할 수도, 상태를 변경할 수도 없다.`

### 행동

협력에 있어 서로 다른 역할을 가진 객체 간에 의사소통이 필요한데 이는 오로지 메세지를 통해서만 가능하다.
메세지를 통해 요청을 받으면 행동을 통해 처리함으로써 협력에 기여한다. 

따라서 행동은 메세지를 받고 요청에 반응하기 위한 활동으로 행동의 결과에 의해 상태가 변경되거나 다른 객체에게 메세지를 보내기도 한다.

행동을 통해 객체의 상태를 변경할 수 있다. 이 때 Side Effect가 초래되며 행동의 결과는 상태에 의존적이다.

또한 상태는 다른 객체가 직접적으로 접근할 수 없는데 대신 캡슐화를 통해 간접적으로 접근이 가능하다. => 행동의 자율성을 높임

캡술화를 하면 상대방은 요청만 할 뿐 수신자의 자율적인 판단에 맡기기 때문에 행동의 자율성을 높여준다.

### 식별자

식별자는 객체의 프로퍼티 중 하나로 객체를 식별할 수 있게 해준다. 이는 모든 객체가 가지는 프로퍼티로 단순한 값은 프로퍼티를 가지지 않는다.

따라서 값의 같은지 확인할 때는 단순히 값만 비교하는 동등성을 확인하면 되지만 객체가 같은지 확인할 때는 식별자를 통해 동일성을 확인한다.

### 정리

객체의 특성

* 객체는 상태를 가지며 상태를 변경할 수 있다.
* 객체의 상태를 변경하는 것은 행동이다.
    * 객체는 행동의 결과는 상태에 의존적이다.
    * 행동의 순서가 결과에 영향을 미친다.
* 객체는 식별자에 의해 식별될 수 있다.

좋은 객체 지향 설계

    1. 상태를 결정하기 보다는 행동을 먼저 결정해라
    즉, 어플리케이션에 필요한 협력을 생각하고 협력에 필요한 행동을 생각한 후 행동을 수행할 객체를 선택한다.

    2. 은유 관계에 있는 실제 객체의 이름을 소프트웨어 객체의 이름으로 사용하면 쉽게 예측할 수 있다.
    